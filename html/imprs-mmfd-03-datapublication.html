<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<!-- Edit me start! -->
		<title>Data sharing</title>
		<meta name="description" content=" Sharing and collaborating on datasets ">
		<meta name="author" content=" Adina Wagner & Michael Hanke ">
		<!-- Edit me end! -->

		<link rel="stylesheet" href="../reveal.js/dist/reset.css">
		<link rel="stylesheet" href="../reveal.js/dist/reveal.css">
		<link rel="stylesheet" href="../reveal.js/dist/theme/beige.css">
        <link rel="stylesheet" href="../css/main.css">
		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="../reveal.js/plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">


<section>

    <section>
    <h2>Research data management with DataLad</h2>
    <h2>@ IMPRS-MMFD</h2>
    <strong>3 - Data Publication and Collaboration</strong><br>
    <img src="../pics/datalad_git.svg" style="height:260px; margin-bottom: 0;" alt="title image">
        <div style="margin-top:1em;text-align:center">
        <table style="border: none;">
        <tr>
            <td>
                Stephan Heunis<br>
                <small>
                <a href="https://github.com/jsheunis" target="_blank">
                <img data-src="../pics/GitHub.png" style="height:30px;margin:0px" />
                jsheunis
                </a>
            </small>
            </td>
            <td>
                Michał Szczepanik<br>
                <small>
                <a href="https://github.com/mslw" target="_blank">
                <img data-src="../pics/GitHub.png" style="height:30px;margin:0px" />
                mslw
                </a>
            </small>
            </td>
        </tr>
        <tr>
        <td>
            <img style="height:70px;margin-right:10px;margin-top:20px" data-src="../pics/fzj_logo.svg" /><br>
        </td>
        <td style="padding-top: 20px; vertical-align: top;">
    <small style="margin-top:0px;margin-top:0px"><a href="http://psychoinformatics.de" target="_blank">Psychoinformatics lab</a>,
                <br> Institute of Neuroscience and Medicine (INM-7)<br>
                        Research Center Jülich</small><br>
        </td>
        </tr>
        </table>
        </div>
    
    <br><br><small>
        Slides: <a href="https://github.com/datalad-handbook/course/blob/master/talks/PDFs" target="_blank">
        https://github.com/datalad-handbook/course/</a></small>
    </a>
    </section>
    </section>
  <section>

  <section data-transition="None">
      <h2>Quick recap</h2>
    <img src="../pics/artwork/src/dataset.svg" width="600"> <br>
  </section>

  <section data-transition="None">
      <h2>Quick recap</h2>
    <img src="../pics/artwork/src/publishing/publishing_gitvsannex.svg" width="900"> <br>
  </section>

  <section data-transition="None">
      <h2>Quick recap</h2>
    <img src="../pics/artwork/src/local_wf.svg" width="600"> <br>
  </section>

  <section data-transition="None">
      <h2>Quick recap</h2>
    <img src="../pics/researchlog.png" width="900"> <br>
  </section>

  <section data-transition="None">
      <h2>Quick recap</h2>
    <img src="../pics/artwork/src/reproducible_execution.svg" width="900"> <br>
  </section>


  <section>
      <h2>Before we begin...</h2>

      Any left-over questions from yesterday?
  </section>


<section>
  <h2> Publishing datasets </h2>
  <table>
  <tr>
    <td>How to share your work with others</td>
  </tr>
  <tr>
    <td>
        <small>Repository hosting services, siblings, and <code>datalad push</code><br>
      </small>
    </td>
  </tr>
  </table>
</section>
  </section>

  <!--...WORKSHOP INTRODUCTION...-->

  <section>


  <section data-transition="None">
      <h2>Publishing datasets</h2>
      I have a dataset on my computer. How can I share it, or collaborate on it?
      <img height="750" src="../pics/artwork/src/publishing/startingpoint.svg">
  </section>

  <section data-transition="None">
      <h2>"Share data like source code"</h2>
      <ul style="font-size:30px">
          <li class="fragment fade-in-then-semi-out" data-fragment-index="1">Datasets can be cloned, pushed, and updated from and to <strong>local</strong> and <strong>remote</strong></strong> paths,
              remote <strong>hosting services</strong>, external <strong>special remotes</strong></li>
      <img class="fragment fade-in" data-fragment-index="1" style="box-shadow: 5px 5px 3px #888888; text-align: center;"  height="280" src="../pics/artwork/src/collaboration.svg">
          <li class="fragment fade-in">Examples: <br>
          Local path <pre><code class="language-bash">../my-projects/experiment_data</code></pre>
          Remote path <pre><code class="language-bash">myuser@myinstitutes.hcp.system:/home/myuser/my-projects/experiment_data</code></pre>
          Hosting service <pre><code class="language-bash">git.github.com:myuser/experiment_data.git</code></pre>
          External special remotes <pre><code class="language-bash">osf://my-osf-project-id</code></pre></li>
      </ul>
  <aside class="notes">
  Idea behind datalad: Enable a similar level of tooling and culture for the distribution and version control of data as it is present for open source software development
  </aside>
  </section>


  <section data-transition="None">
      <h2>Interoperability</h2>
      <ul style="font-size:30px">
          <li>DataLad is built to maximize interoperability and use with hosting and
              storage technology</li>
          </ul>
      <img src="../pics/services_only.png" height="650">
            <small>See the chapter <a href="http://handbook.datalad.org/en/latest/basics/basics-thirdparty.html" target="_blank">
          Third party infrastructure</a> for walk-throughs for different services</small>
  </section>

  <section data-transition="None">
      <h2>Interoperability</h2>
      <ul style="font-size:30px">
          <li>DataLad is built to maximize interoperability and use with hosting and
              storage technology</li>
      </ul>
      <img src="../pics/services_connected.png" height="650">
      <small>See the chapter <a href="http://handbook.datalad.org/en/latest/basics/basics-thirdparty.html" target="_blank">
          Third party infrastructure</a> for walk-throughs for different services</small>
  </section>


  <section data-transition="None">
      <h2>Glossary</h2>
      <dl style="font-size:30px">
          <dt class="fragment fade-in" data-fragment-index="1">
              Sibling (remote)</dt>
          <dd class="fragment fade-in" data-fragment-index="1">
              Linked clones of a dataset. You can usually update (from) siblings to keep all your siblings in sync
              (e.g., ongoing data acquisition stored on experiment compute and backed up on cluster and external hard-drive)
          </dd>
          <dt class="fragment fade-in" data-fragment-index="2">
              Repository hosting service</dt>
          <dd class="fragment fade-in" data-fragment-index="2">
              Webservices to host Git repositories, such as GitHub, GitLab, Bitbucket, Gin, ...</dd>
          <dt class="fragment fade-in" data-fragment-index="3">
              Third-party storage</dt>
          <dd class="fragment fade-in" data-fragment-index="3">
              Infrastructure (private/commercial/free/...) that can host data. A "special remote" protocol
              is used to publish or pull data to and from it
          </dd>
          <dt class="fragment fade-in" data-fragment-index="4">
              Publishing datasets</dt>
          <dd class="fragment fade-in" data-fragment-index="4">
              <em>Pushing</em> dataset contents (Git and/or annex) to a sibling using <strong>datalad push</strong></dd>
          <dt class="fragment fade-in" data-fragment-index="5">
              Updating datasets</dt>
          <dd class="fragment fade-in" data-fragment-index="5">
              <em>Pulling</em> new changes from a sibling using <strong>datalad update --merge</strong></dd>
      </dl>
  </section>

  <section data-transition="None">
      <h2>Sharing datasets</h2>
      <ul>
          <li>Most public datasets separate content in Git versus git-annex behind the scenes</li>
      </ul>
      <img height="750" src="../pics/artwork/src/publishing/publishing_network_gitvsannex.svg">

  </section>

  <section data-transition="None">
      <h2>Sharing datasets</h2>
      <img height="750" src="../pics/artwork/src/publishing/publishing_network_publishparts.svg">
  </section>

  <section data-transition="None">
      <h2>Sharing datasets</h2>
      <img height="750" src="../pics/artwork/src/publishing/publishing_network_publishparts2.svg">
  </section>

  <section data-transition="None">
      <h2>Sharing datasets</h2>
      Typical case:
      <ul style="font-size:30px">
          <li class="fragment fade-in">
              Datasets are exposed via a private or public repository on a
              repository hosting service
          </li>
          <li class="fragment fade-in">
              Data can't be stored in the repository hosting service, but can be
              kept in almost any third party storage
          </li>
          <li class="fragment fade-in">
              Publication dependencies automate pushing to the correct place, e.g.,
              <pre><code class="bash">$ git config --local remote.github.datalad-publish-depends gdrive
# or
$ datalad siblings add --name origin --url git@git.jugit.fzj.de:adswa/experiment-data.git --publish-depends s3            </code></pre></li>
      </ul>
      <img src="../pics/artwork/src/publishing/publishing_network_publishdepends.svg">
  </section>

  <section data-transition="None">
      <h2>Sharing datasets</h2>
      <ul style="font-size:30px">
      <li>Real-life example 1:<br>
          GitHub for repository hosting, data hosting via datapub.fz-juelich.de + GNODE
      </li>
      <img height="850" class="fragment fade-in" src="../pics/clonedata.gif" alt="a screenrecording of cloning studyforrest data from github">
  </ul>
  </section>

  <section data-transition="None">
      <h2>Sharing datasets</h2>
      <ul style="font-size:30px">
      <li>Real-life example 2:<br>
          GitLab for repository hosting, data hosting via internal webserver (access restricted)
      </li>
      <img height="850" class="fragment fade-in" src="../pics/centralmanagement.gif" alt="a screenrecording of cloning studyforrest data from github">
  </ul>
  </section>

  <section data-transition="None">
      <h2>Sharing datasets</h2>
      <ul style="font-size:30px">
      <li>Real-life example 3:<br>
          GitHub for repository hosting, data hosting via Amazon S3 (requires DUA)
      </li>
      <img height="850" class="fragment fade-in" src="../pics/get_hcpdata.gif" alt="a screenrecording of cloning studyforrest data from github">
  </ul>
  </section>

  <section data-transition="None">
      <h2>Sharing datasets</h2>
            <p style="font-size:30px"> Special case 1: repositories with annex support</p>
      <img height="850" class="fragment fade-in" src="../pics/artwork/src/publishing/publishing_network_publishgin.svg">
  </section>

  <section data-transition="None">
      <h2>Sharing datasets</h2>
      <p style="font-size:30px">Special case 2: Special remotes with repositories</p>
      <img height="850" src="../pics/artwork/src/publishing/publishing_network_publishosf.svg">
  </section>

  <section data-transition="None">
      <h2>Sharing datasets</h2>
            <p style="font-size:30px"> Special case 1: repositories with annex support</p>

            <img src="../pics/gin-logo.png" alt="">
            <br>
                  [LIVE DEMO GIN]<br>
  </section>

  <section data-transition="None">
      <h2>Sharing datasets</h2>
             <p style="font-size:30px">Special case 2: Special remotes with repositories</p>
             <img src="../pics/osf_logo.png" alt="">
             <br>
      <small>Requires the DataLad extension
          <a href="http://docs.datalad.org/projects/osf/en/latest/" target="_blank">datalad-osf</a>
      </small><br>
      [You'll be doing this yourself in a short while...]<br>
      
  </section>
  
  <section>
      <h2>Sharing datasets</h2>
      <ul style="font-size:30px">
          DataLad can create siblings from the command line for the following services:
          <dt>GitHub</dt>
          <dd><code>datalad create-sibling-github</code></dd>
          <dt>GitLab</dt>
          <dd><code>datalad create-sibling-gitlab</code></dd>
          <dt>Gin</dt>
          <dd><code>datalad create-sibling-gin</code></dd>
          <dt>Gogs</dt>
          <dd><code>datalad create-sibling-gogs</code></dd>
          <dt>local or remote paths</dt>
          <dd><code>datalad create-sibling</code></dd>
          <dt>RIA stores</dt>
          <dd><code>datalad create-sibling-ria</code></dd>
          <dt>Open Science Framework (needs datalad-osf)</dt>
          <dd><code>datalad create-sibling-osf</code></dd>
          <dt><a href="https://en.wikipedia.org/wiki/WebDAV" target="_blank">
              WebDAV</a>-based hosting (e.g., Sciebo, EOSC; needs datalad-next)</dt>
          <dd><code>datalad create-sibling-webdav</code></dd><br>
        (Additional services being worked on at this moment: Dataverse, ebrains; <br>
        Get in touch with additional service support requests)
      </ul>
  </section>

  <section data-transition="None">
      <h2>Cloning DataLad datasets</h2>
      How does cloning dataset feel like for a consumer?
      <img height="750" src="../pics/artwork/src/publishing/clone_local.svg">
  </section>

  <section data-transition="None">
      <h2>Cloning DataLad datasets</h2>
      How does cloning dataset feel like for a consumer?
      <img height="750" src="../pics/artwork/src/publishing/clone_server.svg">
  </section>

  <section data-transition="None">
      <h2>Cloning DataLad datasets</h2>
      How does cloning dataset feel like for a consumer?
      <img height="750" src="../pics/artwork/src/publishing/clone_url.svg">
  </section>

  <section data-transition="None">
      <h2>Cloning DataLad datasets</h2>
      Let's take a look at the special cases: <br>
      <img src="../pics/gin-logo.png" alt="">
            <br>
      [LIVE DEMO CLONING GIN]
  </section>


  <section data-transition="None">
      <h2>Cloning DataLad datasets</h2>
      Let's take a look at the special cases:<br>
      <img src="../pics/osf_logo.png" alt="">
             <br>
            <small>Requires the DataLad extension
          <a href="http://docs.datalad.org/projects/osf/en/latest/" target="_blank">datalad-osf</a>
      </small><br>
      [You'll be doing this yourself in a short while...]<br>
      
  </section>

  <section>
      <h2>Summary: Data publication</h2>
      <img src="../pics/in_case_of_fire.png" style="border:20px; margin:0px; float:center; width:500px;"/>
      <dl style="font-size:30px"><br>
          <dt class="fragment fade-in-then-semi-out" data-fragment-index="1">datasets can have "siblings", linked clones in other places</dt>
          <dd class="fragment fade-in-then-semi-out" data-fragment-index="1">Those can be local or remote, on commercial, free, or personal infrastructure</dd>
          <dt class="fragment fade-in-then-semi-out" data-fragment-index="2">Typical repository hosting services do not host annexed contents</dt>
          <dd class="fragment fade-in-then-semi-out" data-fragment-index="2">A notable exception is Gin</dd>
          <dt class="fragment fade-in-then-semi-out" data-fragment-index="3">Typical storage providers do not host Git repositories</dt>
          <dd class="fragment fade-in-then-semi-out" data-fragment-index="3">but datalad extensions can make it possible for certain services, such as the OSF</dd>
          <dt class="fragment fade-in-then-semi-out" data-fragment-index="4">Despite the different possible services, operations are streamlined</dt>
          <dd class="fragment fade-in-then-semi-out" data-fragment-index="4"><strong>clone</strong> installs datasets, <strong>get</strong> retrieves data,
              <strong>push</strong> publishes (new changes in) datasets,
              <strong>update</strong> pulls dataset updates.
              This remains the case even if underlying data hosting changes.</dd>
          <dt class="fragment fade-in-then-semi-out" data-fragment-index="5">Siblings serve multiple purposes:</dt>
          <dd class="fragment fade-in-then-semi-out" data-fragment-index="5">Personal back-up that's easy to sync;
              Publicly or privately exposed files to share with (selected) others;
              Entrypoints for collaborations or others' contributions; ...</dd>

      </dl>
  </section>

  <section>
      <h2>Publish your own dataset</h2>

      <a class="fragment fade-in" style="font-size:25px" href="https://psychoinformatics-de.github.io/rdm-course/01-content-tracking-with-datalad/index.html#getting-started-create-an-empty-dataset" target="_blank">
           Based on: psychoinformatics-de.github.io/rdm-course/03-remote-collaboration/index.html#publishing-datasets-to-gin
      </a>
  </section>
  </section>

  <section>
    <section>
        <h2><code>Publishing to OSF</code></h2>
        <p><a href="https://osf.io/">https://osf.io/</a></p>
        <img src="../pics/git-annex-osf-logo.png" alt="datalad-osf-logo" width="50%">
    </section>
    
    <section style="text-align: left;">
        <div style="display: flex !important; align-items: center">
            <h2>create-sibling-osf</h2>&nbsp;<a href="https://docs.datalad.org/projects/osf/en/latest/">(docs)</a>
        </div>
        
        <ol>
            <li class="fragment">Log into OSF</li>
            <li class="fragment">Create personal access token</li>
            <li class="fragment">Enter credentials using <code>datalad osf-credentials</code>:</li>
        </ol>
        <div class="fragment">
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    datalad osf-credentials
                </code>
            </pre>
        </div>
        <div class="fragment">
            4. Create the sibling:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    datalad create-sibling-osf -d . -s my-osf-sibling \
                    --title 'my-osf-project-title' --mode export --public
                </code>
            </pre>
        </div>
        <div class="fragment">
            5. Push to the sibling:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    datalad push -d . --to my-osf-sibling
                </code>
            </pre>
        </div>
        <div class="fragment">
            6. Clone from the sibling:
            <pre style="margin-left: 0;">
                <code data-trim class="language-bash" onmousemove="showHover(event)" onmousedown="clickCopy(event)" onmouseleave="leaveElement(event)">
                    cd ..
                    datalad clone osf://my-osf-project-id my-osf-clone
                </code>
            </pre>
        </div>
    </section>
    </section>
      
    <section>
<section>
<h3>Publication and Collaboration Exercise</h3>

<small><em>replace GIN with OSF</em></small>


<div class="r-stack">
<img src="../pics/pub_collab_table_s01.svg" width="100%">
<img class="fragment" data-fragment-index="2" src="../pics/pub_collab_table_s02.svg" width="100%">
<img class="fragment" data-fragment-index="4" src="../pics/pub_collab_table_s03.svg" width="100%">
<img class="fragment" data-fragment-index="6" src="../pics/pub_collab_table_s04.svg" width="100%">
<img class="fragment" data-fragment-index="8" src="../pics/pub_collab_table_s05.svg" width="100%">
<img class="fragment" data-fragment-index="10" src="../pics/pub_collab_table_s06.svg" width="100%">
<img class="fragment" data-fragment-index="12" src="../pics/pub_collab_table_s07.svg" width="100%">
<img class="fragment" data-fragment-index="14" src="../pics/pub_collab_table_s08.svg" width="100%">
<img class="fragment" data-fragment-index="16" src="../pics/pub_collab_table_s09.svg" width="100%">
<img class="fragment" data-fragment-index="18" src="../pics/pub_collab_table_s10.svg" width="100%">
<img class="fragment" data-fragment-index="20" src="../pics/pub_collab_table_s11.svg" width="100%">
<img class="fragment" data-fragment-index="22" src="../pics/pub_collab_table_s12.svg" width="100%">
</div>
<div class="r-stack">
<div class="fragment fade-in-then-out" data-fragment-index="1"><code>datalad clone ...</code></div>
<div class="fragment fade-in-then-out" data-fragment-index="3"><code>datalad save ...</code></div>
<div class="fragment fade-in-then-out" data-fragment-index="5"><code>datalad create-sibling-osf ...</code></div>
<div class="fragment fade-in-then-out" data-fragment-index="7"><code>datalad push ...</code></div>
<div class="fragment fade-in-then-out" data-fragment-index="9"><code>datalad remove ...</code></div>
<div class="fragment fade-in-then-out" data-fragment-index="11"><code>datalad clone ...</code></div>
<div class="fragment fade-in-then-out" data-fragment-index="13"><code>datalad save ...</code></div>
<div class="fragment fade-in-then-out" data-fragment-index="15"><code>datalad push ...</code></div>
<div class="fragment fade-in-then-out" data-fragment-index="16">Any other attendee could be a collaborator</div>
<div class="fragment fade-in-then-out" data-fragment-index="19"><code>datalad siblings add ...</code></div>
<div class="fragment fade-in-then-out" data-fragment-index="21"><code>datalad update ...</code></div>
<div class="fragment fade-in-then-out" data-fragment-index="23"><code>datalad push ...</code></div>
<div class="fragment fade-in-then-out" data-fragment-index="24"></div>
</div>
</section>
</section>


			</div>
		</div>

		<script src="../reveal.js/dist/reveal.js"></script>
		<script src="../reveal.js/plugin/notes/notes.js"></script>
		<script src="../reveal.js/plugin/markdown/markdown.js"></script>
		<script src="../reveal.js/plugin/highlight/highlight.js"></script>
        <script src="../custom_functions.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,
				// The "normal" size of the presentation, aspect ratio will be preserved
				// when the presentation is scaled to fit different resolutions. Can be
				// specified using percentage units.
				width: 1280,
				height: 960,
				// Factor of the display size that should remain empty around the content
				margin: 0.1,
				// Bounds for smallest/largest possible scale to apply to content
				minScale: 0.2,
				maxScale: 1.0,

				controls: true,
				progress: true,
				history: true,
				center: true,
				slideNumber: 'c',
				pdfSeparateFragments: false,
				pdfMaxPagesPerSlide: 1,
				pdfPageHeightOffset: -1,
				transition: 'slide', // none/fade/slide/convex/concave/zoom
				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
